<div
  id="sparc-sidebar-left"
  class="geodash-sidebar geodash-sidebar-left geodash-controller sidebar-open sidebar-left-open">
  <div class="geodash-sidebar-charts" style="width:100%;">
    <div geodash-tabs></div>
    <div class="tab-content">
      <div
        id="sparc-sidebar-left-welcome"
        role="tabpanel"
        class="tab-pane fade in active"
        style="padding: 10px;">
        <div
          ng-bind-html="map_config.welcome.intro | md2html">
        </div>
      </div>
      <div
        id="sparc-sidebar-left-charts"
        role="tabpanel"
        class="tab-pane fade"
        style="padding: 10px;">
        <div
          ng-repeat="chart in charts track by $index"
          on-repeat-done="chart_done"
          data-repeat-index="{{ $index }}"
          id="sparc-sidebar-left-charts-chart-{{ chart.id }}">
          <div>
            <h4
              style="text-align:center;"
              ng-bind-html="chart.title | md2html"></h4>
          </div>
          <div
            id="{{ chart.element }}"
            class="geodash-sidebar-chart"
            style="width:360px;margin:0 auto;"
          ></div>
        </div>
      </div>
      <div
        id="sparc-sidebar-left-layers"
        role="tabpanel"
        class="tab-pane fade"
        style="padding: 10px;">
        <div>
          <div class="input-group select2-bootstrap-prepend select2-bootstrap-append">
            <input
              id="country-input-backend"
              name="country-input-backend"
              type="text"
              class="form-control"
              style="display:none;"
              ng-model="country">
            <span class="input-group-addon" id="country-addon">Country</span>
            <input
              id="country-input"
              name="country-input"
              type="text"
              class="typeahead form-control"
              style="height: auto;"
              placeholder="Country (e.g., Haiti or Philippines)"
              aria-describedby="country-addon"
              data-placeholder="Country (e.g., Haiti, Nepal, or Philippines)"
              data-initial-data="countries_select2"
              data-backend="country-input-backend"
              data-template-empty="<div class=&quot;alert alert-danger empty-message&quot;>Unable to find country</div>">
              <div
                class="input-group-addon btn btn-primary btn-show-options"
                data-toggle="tooltip"
                data-placement="bottom"
                title="Show Options"
                ng-click="showOptions($event, '#country-input')">
                <i class="fa fa-chevron-down"></i>
              </div>
              <div
                class="input-group-addon btn btn-danger btn-clear"
                data-clear="#country-input"
                data-toggle="tooltip"
                data-placement="bottom"
                title="Clear Selection">
                <i class="fa fa-times"></i>
              </div>
          </div>
          <hr>
          <ul class="nav nav-justified welcome-go">
            <li>
              <a
                ng-disabled="country == undefined || hazard == undefined || country == '' || hazard == ''"
                ng-class="country == undefined || hazard == undefined || country == '' || hazard == '' ? 'btn btn-default' : 'btn btn-primary' "
                ng-href="{{ country == undefined || hazard == undefined || country == '' || hazard == '' ? '#' : '/country/'+country+'/hazard/'+hazard +'/month/1' }}">Go!</a>
            </li>
          </ul>
        </div>
        <div>
          <h4>Selected Layers</h4>
          <div class="geodash-sidebar-sparclayers">
            <div
              ng-repeat="layer in visiblefeaturelayers track by $index"
              ng-init="layerIndex = $index"
              ng-if="layer.legend!==undefined"
              class="geodash-sidebar-item noselect"
              data-layer="{{ layer.id }}">
              <div class="geodash-sidebar-item-left">
                <div class="geodash-sidebar-item-icon geodash-sidebar-item-visibility">
                   <a
                     class="geodash-sidebar-item-visibility-button geodash-intent"
                     data-intent-name="hideLayer"
                     data-intent-data="{&quot;layer&quot;:&quot;{{ layer.id }}&quot;}"
                     data-intent-ctrl="sparc-sidebar-left"
                     data-toggle="tooltip"
                     data-placement="bottom"
                     title="Click to hide this layer.">
                     <i class="fa fa-times"></i>
                   </a>
                </div><!--
                --><div class="geodash-sidebar-item-icon geodash-sidebar-item-more">
                  <a
                    class="geodash-intent"
                    data-intent-name="showModal"
                    data-intent-data="{{ html5data('showModal', 'geodash-modal-layer-more', 'featurelayer', layer) }}"
                    data-intent-ctrl="sparc-sidebar-left"
                    data-toggle="tooltip"
                    data-placement="bottom"
                    title="Click to learn more about this layer.">
                    <i class="fa fa-info-circle"></i>
                  </a>
                </div><!--
                --><div
                     ng-class="layer.type == 'geojson' ? 'geodash-sidebar-item-icon geodash-sidebar-item-zoomto': 'geodash-sidebar-item-icon geodash-sidebar-item-zoomto fade disabled'">
                   <a
                     class="geodash-sidebar-item-zoomto-button geodash-intent"
                     data-intent-name="zoomToLayer"
                     data-intent-data="{&quot;layer&quot;:&quot;{{ layer.id }}&quot;}"
                     data-intent-ctrl="sparc-sidebar-left"
                     data-toggle="tooltip"
                     data-placement="bottom"
                     title="Click to zoom to this layer.">
                     <i class="fa fa-compress"></i>
                   </a>
                </div>
              </div><!--
              --><div class="geodash-sidebar-item-right">
                <div
                  class="geodash-sidebar-item-label"
                  style="width: 100%;">
                  <span ng-bind-html="layer.legend.label | md2html"></span>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div
          ng-repeat="x in groups track by $index"
          ng-init="groupIndex = $index">
          <h4 ng-bind-html="x.label"></h4>
          <div ng-class="x.class">
            <div
              ng-repeat="layer in x.layers track by $index"
              ng-init="layerIndex = $index"
              ng-if="layer.legend | ternary_defined : ( layer.id | inArray : state.view.featurelayers | not) : false"
              class="geodash-sidebar-item noselect"
              data-layer="{{ layer.id }}">
              <div class="geodash-sidebar-item-left">
                <div class="geodash-sidebar-item-icon geodash-sidebar-item-more">
                  <a
                    class="geodash-intent"
                    data-intent-name="toggleModal"
                    data-intent-data="{{ html5data('toggleModal', 'geodash-modal-layer-more', 'featurelayer', layer) }}"
                    data-intent-ctrl="sparc-sidebar-left"
                    data-toggle="tooltip"
                    data-placement="bottom"
                    title="Click to learn more about this layer.">
                    <i class="fa fa-info-circle"></i>
                  </a>
                </div>
              </div><!--
              --><div class="geodash-sidebar-item-right">
                <div
                  class="geodash-sidebar-item-label geodash-intent"
                  style="width: 100%; opacity: 0.6;"
                  data-intent-name="showLayer"
                  data-intent-data="{&quot;layer&quot;:&quot;{{ layer.id }}&quot;}"
                  data-intent-ctrl="sparc-sidebar-left">
                  <span ng-bind-html="layer.legend.label | md2html"></span>
                </div>
              </div>
            </div>
          </div>
        </div>
        <h4>Base Layers</h4>
        <div class="geodash-sidebar-baselayers geodash-radio-group">
          <div
            ng-repeat="layer in baselayers track by $index"
            ng-init="layerIndex = $index"
            ng-if="layer.legend!==undefined"
            class="geodash-sidebar-item noselect"
            data-layer="{{ layer.id }}">
            <div class="geodash-sidebar-item-left">
              <div class="geodash-sidebar-item-icon geodash-sidebar-item-more">
                <a
                  class="geodash-intent"
                  data-intent-name="toggleModal"
                  data-intent-data="{{ html5data('toggleModal', 'geodash-modal-layer-more', 'baselayer', layer) }}"
                  data-intent-ctrl="sparc-sidebar-left"
                  data-toggle="tooltip"
                  data-placement="bottom"
                  title="Click to learn more about this layer.">
                  <i class="fa fa-info-circle"></i>
                </a>
              </div><!--
              --><div class="geodash-sidebar-item-icon geodash-sidebar-item-visibility">
                   <a
                     ng-class=" layer.id == state.view.baselayer ? 'geodash-sidebar-item-visibility-button geodash-intent geodash-radio geodash-on' : 'geodash-sidebar-item-visibility-button geodash-intent geodash-radio'"
                     data-intent-name="switchBaseLayer"
                     data-intent-data="{&quot;layer&quot;:&quot;{{ layer.id }}&quot;}"
                     data-intent-class-on="geodash-on"
                     data-intent-class-off=""
                     data-intent-ctrl="sparc-sidebar-left">
                     <i class="fa fa-eye geodash-on"></i><i class="fa fa-eye-slash geodash-off"></i>
                   </a>
              </div><!--
              --><div class="geodash-sidebar-item-symbol" style="width: 10px;"></div>
            </div><!--
            --><div class="geodash-sidebar-item-right">
              <div
                class="geodash-sidebar-item-label"
                style="{{ layer.id == state.view.baselayer ? 'width: 100%;' : 'width: 100%;opacity: 0.4;' }}">
                <span ng-bind-html="layer.legend.label | md2html"></span>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div
        id="sparc-sidebar-left-filters"
        role="tabpanel"
        class="tab-pane fade"
        style="padding: 10px;">
        <div
          ng-repeat="filter in filters track by $index">
          <div geodash-filter-radio ng-if="filter.type == 'radio'"></div>
          <div geodash-filter-checkbox ng-if="filter.type == 'checkbox'"></div>
          <div geodash-filter-slider ng-if="filter.type == 'slider'"></div>
        </div>
      </div>
    </div>
  </div>
</div>
